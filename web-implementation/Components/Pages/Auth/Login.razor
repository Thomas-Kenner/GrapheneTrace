@page "/login"
@layout Layout.AuthLayout
@using GrapheneTrace.Web.Components.UI

@*
    Login Page
    Author: SID:2412494
    Route: /login

    Purpose: Provides user authentication entry point for the application.

    Design Pattern: Traditional HTML form POST to controller endpoint.
    Why: Blazor Server components run over SignalR WebSocket. Calling SignInManager directly
    throws "Headers are read-only" because cookies can't be set after response starts.
    Using HttpClient also doesn't share cookies with the browser properly.

    Solution: Traditional HTML form that POSTs directly to /account/login controller endpoint.
    The browser handles the entire flow, including cookie storage and redirect.

    Layout: AuthLayout
    Why: Uses minimal layout without navigation/sidebar to focus user on authentication task.

    No InteractiveServer render mode needed - this is a static form.
*@

<link rel="stylesheet" href="css/auth.css" />

<div class="auth-container">
    <Card>
        <CardHeader>
            <h1 class="card-title">Welcome Back</h1>
            <p class="card-description">Sign in to access your GrapheneTrace dashboard</p>
        </CardHeader>

        <form method="post" action="/account/login">
            <CardContent>
                <FormGroup Label="Email Address"
                           Id="email"
                           InputType="email"
                           Name="Email"
                           Required="true"
                           Placeholder="john@example.com" />

                <FormGroup Label="Password"
                           Id="password"
                           InputType="password"
                           Name="Password"
                           Required="true"
                           Placeholder="••••••••" />

                <div class="checkbox-container" style="margin-bottom: 1rem;">
                    <input type="checkbox"
                           class="checkbox-input"
                           id="remember-me"
                           name="RememberMe"
                           value="true" />
                    <label class="checkbox-label" for="remember-me">
                        <div>Remember me</div>
                    </label>
                <FormGroup Label="Password"
                           Id="password"
                           InputType="password"
                           Name="Password"
                           Required="true"
                           Placeholder="••••••••" />

                <div class="checkbox-container" style="margin-bottom: 1rem;">
                    <input type="checkbox"
                           class="checkbox-input"
                           id="remember-me"
                           name="RememberMe"
                           value="true" />
                    <label class="checkbox-label" for="remember-me">
                        <div>Remember me</div>
                    </label>
                </div>
            </CardContent>
            </CardContent>

            <CardFooter>
                <div style="width: 100%; display: flex; flex-direction: column; gap: 1rem;">
                    <Button FullWidth="true" Type="submit">
                        Sign In
                    </Button>
                    <p class="text-center text-muted">
                        Don't have an account? <a href="/account-creation" class="link-text">Create one</a>
                    </p>
                </div>
            </CardFooter>
        </form>
            <CardFooter>
                <div style="width: 100%; display: flex; flex-direction: column; gap: 1rem;">
                    <Button FullWidth="true" Type="submit">
                        Sign In
                    </Button>
                    <p class="text-center text-muted">
                        Don't have an account? <a href="/account-creation" class="link-text">Create one</a>
                    </p>
                </div>
            </CardFooter>
        </form>
    </Card>
</div>
